<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amor e Cacau</title>
    <style>
        :root { --vinho: #800020; --bege: #f7ede2; }
        body { font-family: sans-serif; background: var(--bege); margin: 0; padding: 10px; color: #4b2e2e; }
        .container { max-width: 450px; margin: 0 auto; background: white; padding: 15px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .tabs { display: flex; gap: 5px; margin-bottom: 15px; overflow-x: auto; }
        .tab-btn { padding: 10px; border: none; border-radius: 8px; background: #eee; cursor: pointer; font-weight: bold; flex: 1; white-space: nowrap; }
        .tab-btn.active { background: var(--vinho); color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .card-item { border: 1px solid #ddd; padding: 12px; border-radius: 10px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; }
        .btn-add { background: var(--vinho); color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; }
        .carrinho { background: #fffcf0; padding: 15px; border-radius: 10px; margin-top: 20px; border: 1px solid #e6dbb9; }
        .btn-wpp { width: 100%; padding: 15px; background: #25d366; color: white; border: none; border-radius: 10px; font-weight: bold; font-size: 16px; cursor: pointer; margin-top: 10px; }
        input, select { width: 100%; padding: 10px; margin: 5px 0; border-radius: 8px; border: 1px solid #ccc; box-sizing: border-box; }
        .item-estoque { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #eee; }
    </style>
</head>
<body>

<div class="container">
    <h2 style="text-align:center; color: var(--vinho);">‚ù§Ô∏è Amor e Cacau</h2>
    
    <div class="tabs">
        <button class="tab-btn active" onclick="aba(event, 'venda')">Venda</button>
        <button class="tab-btn" onclick="aba(event, 'estoque')">üì¶ Estoque</button>
    </div>

    <div id="venda" class="tab-content active">
        <h3>Combos de Amanh√£</h3>
        <div id="lista-combos"></div>
        
        <div class="carrinho" id="box-cart" style="display:none;">
            <strong>üõí Pedido:</strong>
            <div id="itens-cart"></div>
            <hr>
            <input type="text" id="cliente" placeholder="Nome do Cliente">
            <select id="entrega">
                <option value="">Como entregar?</option>
                <option value="Retirada">Retirada</option>
                <option value="Uber Moto">Uber Moto</option>
            </select>
            <button class="btn-wpp" onclick="enviar()">Enviar para WhatsApp</button>
        </div>
    </div>

    <div id="estoque" class="tab-content">
        <h3>Baixa Manual</h3>
        <div id="lista-estoque"></div>
        <button onclick="resetaEstoque()" style="width:100%; margin-top:20px; padding:8px;">üîÑ Resetar para Amanh√£</button>
    </div>
</div>

<script>
    const COMBOS = [
        { n: "Combo Tropical (Marac/Lim√£o)", p: 10 },
        { n: "Combo Chocolatudo (Tradicional)", p: 10 },
        { n: "Combo Turbo (Trad/Caf√©)", p: 10 },
        { n: "Combo Festa (Trad/Beijinho)", p: 10 },
        { n: "Combo Misto (Variados)", p: 10 },
        { n: "Combo Chocolima (Lim√£o/Trad)", p: 10 },
        { n: "Combo Caf√© Azedo", p: 10 },
        { n: "Combo Maracublack (Trad/Marac)", p: 10 }
    ];

    const INICIAL = {
        "Combo Tropical (Marac/Lim√£o)": 4,
        "Combo Chocolatudo (Tradicional)": 4,
        "Combo Turbo (Trad/Caf√©)": 2,
        "Combo Festa (Trad/Beijinho)": 3,
        "Combo Misto (Variados)": 3,
        "Combo Chocolima (Lim√£o/Trad)": 2,
        "Combo Caf√© Azedo": 4,
        "Combo Maracublack (Trad/Marac)": 2
    };

    let estoque = JSON.parse(localStorage.getItem('aec_estoque')) || {...INICIAL};
    let carrinho = [];

    function aba(e, id) {
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        e.currentTarget.classList.add('active');
        if(id === 'estoque') renderEstoque();
    }

    function renderVenda() {
        const div = document.getElementById('lista-combos');
        div.innerHTML = COMBOS.map(c => `
            <div class="card-item">
                <span>${c.n}</span>
                <button class="btn-add" onclick="add('${c.n}', ${c.p})">Adicionar</button>
            </div>
        `).join('');
    }

    function add(nome, preco) {
        carrinho.push({nome, preco});
        renderCarrinho();
    }

    function renderCarrinho() {
        const box = document.getElementById('box-cart');
        const lista = document.getElementById('itens-cart');
        if(carrinho.length > 0) {
            box.style.display = 'block';
            lista.innerHTML = carrinho.map((it, i) => `
                <div style="font-size:14px; margin:5px 0;">
                    ${it.nome} - R$ ${it.preco},00 
                    <button onclick="remover(${i})" style="color:red; border:none; background:none;">[x]</button>
                </div>
            `).join('');
        } else { box.style.display = 'none'; }
    }

    function remover(i) { carrinho.splice(i,1); renderCarrinho(); }

    function renderEstoque() {
        const div = document.getElementById('lista-estoque');
        div.innerHTML = "";
        for(let k in estoque) {
            div.innerHTML += `
                <div class="item-estoque">
                    <span>${k} (<strong>${estoque[k]}</strong>)</span>
                    <button onclick="baixa('${k}')" ${estoque[k]<=0?'disabled':''}>VENDI -1</button>
                </div>`;
        }
    }

    function baixa(k) {
        if(estoque[k] > 0) {
            estoque[k]--;
            localStorage.setItem('aec_estoque', JSON.stringify(estoque));
            renderEstoque();
        }
    }

    function resetaEstoque() {
        if(confirm("Resetar?")) {
            estoque = {...INICIAL};
            localStorage.setItem('aec_estoque', JSON.stringify(estoque));
            renderEstoque();
        }
    }

    function enviar() {
        const nome = document.getElementById('cliente').value;
        const ent = document.getElementById('entrega').value;
        if(!nome || !ent) return alert("Preencha nome e entrega!");
        
        let msg = `*Amor e Cacau*\nCliente: ${nome}\nEntrega: ${ent}\n\n`;
        let total = 0;
        carrinho.forEach(it => { msg += `‚Ä¢ ${it.nome}\n`; total += it.preco; });
        msg += `\n*Total: R$ ${total},00*`;
        
        window.location.href = `https://api.whatsapp.com/send?phone=5519992483488&text=${encodeURIComponent(msg)}`;
    }

    renderVenda();
</script>
</body>
</html>
